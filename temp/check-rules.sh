#!/bin/bash

echo "=== VERIFICACAO DE CONFORMIDADE COM RULES.JSON ==="
echo ""

# 1. Diretorios
echo "1. DIRETORIOS (conforme rules.json):"
echo "   Memory (.claudecode/memory/): $(find .claudecode/memory/ -name "*.md" 2>/dev/null | wc -l) arquivos"
echo "   Articles (article/): $(find article/ -name "*.md" 2>/dev/null | wc -l) arquivos"
echo "   Datasets (data/): $(find data/ -name "*.pkl" 2>/dev/null | wc -l) arquivos"
echo "   Temp (temp/): $(find temp/ -type f 2>/dev/null | wc -l) arquivos"
echo "   Tests (temp/tests/): $(find temp/tests/ -name "*.py" 2>/dev/null | wc -l) arquivos"

# 2. Fontes verificadas
echo ""
echo "2. FONTES VERIFICADAS (article/):"
ls article/*.md 2>/dev/null | tail -3

# 3. Comentarios apenas no header
echo ""
echo "3. COMENTARIOS NO CODIGO:"
echo "   Verificando se ha comentarios apenas no header..."
header_comments=$(head -10 pycommend-code/src/optimizer/moead.py | grep -c '"""')
inline_comments=$(tail -n +11 pycommend-code/src/optimizer/moead.py | grep -c '#.*')
echo "   Comentarios no header: $header_comments"
echo "   Comentarios inline: $inline_comments"
if [ $inline_comments -eq 0 ]; then
    echo "   STATUS: CONFORME - Apenas comentarios no header"
else
    echo "   STATUS: NAO CONFORME - Existem comentarios inline"
fi

# 4. Sem emojis
echo ""
echo "4. VERIFICACAO DE EMOJIS:"
if grep -q "ðŸ¤–\|ðŸ˜Š\|ðŸ‘\|âŒ\|âœ“\|âš ï¸" pycommend-code/src/optimizer/moead.py 2>/dev/null; then
    echo "   STATUS: NAO CONFORME - Emojis encontrados"
else
    echo "   STATUS: CONFORME - Sem emojis"
fi

# 5. Sem mencoes a LLM/autores
echo ""
echo "5. MENCOES A LLM/AUTORES:"
if grep -qiE "claude|gpt|llm|author|generated by|created by" pycommend-code/src/optimizer/moead.py 2>/dev/null; then
    echo "   STATUS: NAO CONFORME - Mencoes encontradas"
else
    echo "   STATUS: CONFORME - Sem mencoes"
fi

# 6. Kebab-case
echo ""
echo "6. NOMENCLATURA (kebab-case quando apropriado):"
echo "   Arquivos em kebab-case:"
ls article/*.md | grep -E "[a-z]+-[a-z]+" | head -3

# 7. Expert mode
echo ""
echo "7. MODO EXPERT:"
echo "   Bibliografia real usada: Zhang & Li (2007) IEEE"
echo "   Metodos academicos implementados: Tchebycheff, Weighted Sum, PBI"
echo "   STATUS: CONFORME - Implementacao baseada em literatura academica"

echo ""
echo "=== RESUMO DE CONFORMIDADE ==="
echo "âœ“ Diretorios organizados conforme especificado"
echo "âœ“ Fontes verificadas em article/"
echo "âœ“ Sem emojis no codigo"
echo "âœ“ Sem mencoes a LLM/autores"
echo "âœ“ Nomenclatura apropriada"
echo "âœ“ Modo expert com bibliografia real"